<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />

		<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
		Remove this if you use the .htaccess -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

		<title>CCall</title>
		<meta name="description" content="" />
		<meta name="author" content="nick.velloff" />

		<!-- Replace favicon.ico & apple-touch-icon.png in the root of your domain and delete these references -->
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="apple-touch-icon" href="/apple-touch-icon.png" />
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
		<script src="js/purl.js"></script>

		<script type="text/javascript">
			$(document).ready(function() {
				if (/Android/i.test(navigator.userAgent)) {
					console.log('Android');
					directMobileUser(false);
				} else if (/iPhone/i.test(navigator.userAgent)) {
					console.log('iPhone');
					directMobileUser(true);
				} else {
					// unsupported device
					console.log('unsupported device');
					$('div.resultDiv').html('Unsupported Device (use this on iPhone and Android)');
				}
			});

			function directMobileUser(isIOS) {
				var confNumber = $.url().param("n");
				var confID = $.url().param("i");
				var useHash = (($.url().param("useHash") == 'true') ? (true) : (false) );
				//console.log(confNumber);
				//console.log(confID);
				//console.log(useHash);
				//console.log( $.url().param("useHash") );

				/*
				 <a href="tel:+1800229933">tel:+1800229933</a> <br /><br />
				 <a href="tel:+1800229933;postd=4">tel:+1800229933;postd=4</a> <br /><br />
				 <a href="wtai://wp/mc;+1800229933">wtai://wp/mc;+1800229933</a> <br /><br />
				 */
				if (isIOS) {
					window.location = 'tel:' + confNumber + ',,,' + confID + ((useHash) ? ('#') : ('') );
				} else {
					
					/*
					 * is Android - annoyingly have not been able to get it to retain the extension
					 * below are all the attempted formats, everything i could find
					 */
					window.location = 'tel:' + confNumber;
					
					// <a data-rel="external" href="tel:1231231234">(123) 123-1234</a>
					
					// window.location = 'tel:' + confNumber + '%2C%2C%2C' + confID + ((useHash) ? ('%23') : ('') );
					// window.location = 'tel:' + confNumber + '%2C%2C%2C' + confID + ((useHash) ? ('') : ('') );
					
					// window.location = 'tel:' + confNumber + 'T' + confID + ((useHash) ? ('') : ('') );
					
					
					// window.location = 'tel:+1-866-203-7011%2C9587123509';
					
					// $('div.resultDiv').append( '<a data-rel="external" href="tel:' + confNumber + ' ppp ' + confID + ((useHash) ? ('#') : ('')) + '">DIAL!!!</a> <br /><br />'  );
					
					// $('div.resultDiv').append( '<a href="tel:' + confNumber + ';postd=' + confID + ((useHash) ? ('#') : ('')) + '">VERSION 1</a> <br /><br />'  );
					// $('div.resultDiv').append( '<a href="tel:' + confNumber + 'pp' + confID + ((useHash) ? ('#') : ('')) + '">VERSION 2</a> <br /><br />'  );
					// $('div.resultDiv').append( '<a href="tel:' + confNumber + ';pp' + confID + ((useHash) ? ('#') : ('')) + '">VERSION 3</a> <br /><br />'  );
					// $('div.resultDiv').append( '<a href="wtai://wp/mc;:' + confNumber + '">wtai://wp/mc;+1800229933</a> <br /><br />'  );
				}
			}
		</script>

	</head>

	<body>
		<div>
			<header></header>

			<div class="resultDiv"></div>

			<footer>

			</footer>
		</div>
	</body>
</html>
