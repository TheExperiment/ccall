<!DOCTYPE html>
<html lang="en">
	<head>

		<meta charset="utf-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>

		<title>Ccall : 1-Click Conference Calls</title>

		<link rel="stylesheet" type="text/css" href="css/style.css"/>
		<script type="text/javascript" src="//use.typekit.net/rrf5isi.js"></script>
		<script type="text/javascript">
			try {
				Typekit.load();
			} catch(e) {
			}
		</script>

		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
		<script src="js/purl.js"></script>
		
		<script>
		  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		
		  ga('create', 'UA-45973655-4', 'auto');

		</script>
		
		<script type="text/javascript">			
			$(document).ready(function() {
				
				if (/Android/i.test(navigator.userAgent)) {
					// console.log('Android');
					ga('send', 'pageview', '/result/android');
					directMobileUser('android');
				} else if (/iPhone/i.test(navigator.userAgent)) {
					ga('send', 'pageview', '/result/ios');
					// console.log('iPhone');
					directMobileUser('ios');
				}else if(/Windows Phone/i.test(navigator.userAgent)) {
					ga('send', 'pageview', '/result/windows');
					// console.log('windows phone');
					directMobileUser('windows');
				} else {
					// unsupported device
					// console.log('unsupported device');
					ga('send', 'pageview', '/result/desktop');
					$('div.resultDiv').html('Desktop not supported. Please use on iPhone.');
				}
				
				$('#cc-logo').click(function() {
					var httpBase = $(location).attr('href').substring(0, $(location).attr('href').lastIndexOf("/") + 1);
					window.location = httpBase;
				});
				$('#cc-logo').hover(function() {
			        $(this).css('cursor','pointer');
			    });
			});
			
			function directMobileUser(os) {
				var confNumber = $.url().param("n");
				var confID = $.url().param("i");
				var useHash = (($.url().param("useHash") == 'true') ? (true) : (false) );
				
				if (os=='ios') {
					window.location = 'tel:' + confNumber + ',,,' + confID + ((useHash) ? ('#') : ('') );
				} else if (os=='android') {
					
					// console.log('unsupported device');
					$('div.resultDiv').html('Not currently supported on Android (we can\'t seem to get it to work)<br/><a href="https://github.com/TheExperiment/ccall">Fork us on GitHub and help out!</a>');
					
					/*
					 * is Android - annoyingly have not been able to get it to retain the extension
					 * below are all the attempted formats, everything i could find - fail
					 * I think it just may not allow it. Prove me wrong.
					 */
					// window.location = 'tel:' + confNumber;

					// <a data-rel="external" href="tel:1231231234">(123) 123-1234</a>

					// window.location = 'tel:' + confNumber + '%2C%2C%2C' + confID + ((useHash) ? ('%23') : ('') );
					// window.location = 'tel:' + confNumber + '%2C%2C%2C' + confID + ((useHash) ? ('') : ('') );

					// window.location = 'tel:' + confNumber + 'T' + confID + ((useHash) ? ('') : ('') );

					// window.location = 'tel:+1-866-203-7011%2C9587123509';

					// $('div.resultDiv').append( '<a data-rel="external" href="tel:' + confNumber + ' ppp ' + confID + ((useHash) ? ('#') : ('')) + '">DIAL!!!</a> <br /><br />'  );

					// $('div.resultDiv').append( '<a href="tel:' + confNumber + ';postd=' + confID + ((useHash) ? ('#') : ('')) + '">VERSION 1</a> <br /><br />'  );
					// $('div.resultDiv').append( '<a href="tel:' + confNumber + 'pp' + confID + ((useHash) ? ('#') : ('')) + '">VERSION 2</a> <br /><br />'  );
					// $('div.resultDiv').append( '<a href="tel:' + confNumber + ';pp' + confID + ((useHash) ? ('#') : ('')) + '">VERSION 3</a> <br /><br />'  );
					// $('div.resultDiv').append( '<a href="wtai://wp/mc;:' + confNumber + '">wtai://wp/mc;+1800229933</a> <br /><br />'  );
				} else if (os=='windows') {
					// no clue here... 
					$('div.resultDiv').html('Not currently supported on Windows Mobile<br/><a href="https://github.com/TheExperiment/ccall">Fork us on GitHub and help out!</a>');
				}
			}
		</script>
	</head>

	<body lang="en">
		<div id="container">
			<div id="main">
				<div id="cc-logo" class="logo" alt="ccall"><img src="img/ccall.svg"></div>
				<h1><div class="resultDiv"></div></h1>
			</div>
		</div>
		<div class="social">
			<div class="social-cat share">
				<div class="social-head">
					SHARE
				</div>
				<a href="https://www.facebook.com/sharer/sharer.php?u=ccall.me" target="_blank"><img src="img/fb.svg"></a><a href="https://twitter.com/home?status=Never%20enter%20a%20conference%20call%20code%20on%20your%20iPhone%20again:%20http://ccall.me%20from%20@exprmnt&amp;source=webclient" target="_blank"><img src="img/twitter.svg"></a>
			</div>
			<div class="social-cat fork">
				<div class="social-head">
					FORK
				</div>
				<a href="https://github.com/theexperiment/ccall" target="_blank"><img src="img/github.svg"></a>
			</div>
			<div class="social-cat hello">
				<div class="social-head">
					HELLO
				</div>
				<a href="https://twitter.com/exprmnt" target="_blank"><img src="img/twitter.svg"></a>
			</div>
		</div>
	</body>
</html>
